<script>
	function show_setting_menu(span) {
		menu = span.textContent.toLowerCase()
		for (item of document.getElementsByClassName("setting_menu_button")) {
			document.getElementById("setting_menu_"+item.textContent.toLowerCase()).classList.add("hidden");
			item.classList.remove("selected");
		}
		span.classList.add("selected");
		document.getElementById("setting_menu_"+menu).classList.remove("hidden");
	}
</script>
<style>
	#Model_Info {
		width: 100%;
	}
	#Story_Info {
		width: 100%;
	}
	#save_story[story_gamesaved="true"] {
		text: var(--disabled_button_text);
		background-color: var(--disabled_button_background_color);
		border-color: var(--disabled_button_border_color);
		filter: brightness(85%);
	}
	
</style>
<!-- top menu bar-->
<div class="menu_pin_area"></div>
<div class="tabrow">
	<span class="setting_menu_button selected" onclick="show_setting_menu(this);">Model</span>
	<span class="setting_menu_button" onclick="show_setting_menu(this);">Story</span>
	<span class="setting_menu_button" onclick="show_setting_menu(this);">User</span>
	<span style="float: right;margin-right: 30px;" onclick="window.open('https://github.com/KoboldAI/KoboldAI-Client/wiki');">Help</span>
</div>

<div id="setting_menu_model" class="settings_category_area">
	<div id="Model_Info">
		<div>
			Running Model: <span class="var_sync_model_model">ReadOnly</span>
			<select id=presets class="var_sync_model_selected_preset settings_select" onchange='sync_to_server(this)'><option>Preset</option></select>
		</div>
		<div><button class="btn action_button" onclick="socket.emit('load_model_button', {});">Load Model</button></div>
	</div>
	<div class="setting_tile_area">
	{% with menu='Model' %}
		{% include 'settings item.html' %}
	{% endwith %}
	</div>
	<h4>
		<span id="bias_open" class="oi" data-glyph="chevron-bottom" onclick='this.classList.add("hidden"); 
																			 document.getElementById("bias_close").classList.remove("hidden"); 
																			 document.getElementById("biasing").classList.add("hidden");'> Biasing:</span>
		<span id="bias_close" class="oi hidden" data-glyph="chevron-right" onclick='this.classList.add("hidden"); 
																			 document.getElementById("bias_open").classList.remove("hidden"); 
																			 document.getElementById("biasing").classList.remove("hidden");'> Biasing:</span>
	</h4>
	<div id="biasing">
		<div class="bias_header">
			<div class="bias_header_phrase">Phrase</div>
			<div class="bias_header_score">Score</div>
			<div class="bias_header_comp_threshold">Completion Threshold</div>
		</div>
		<div class="bias">
			<div class="bias_phrase">
				<input type=text placeholder="Word or Phrase to Bias" onchange="save_bias(this);"/>
			</div>
			<div class="bias_score">
				<div class="bias_slider">
					<div class="bias_slider_bar">
						<input type="range" min="-12" max="12" step="0.01" value="0" class="setting_item_input"
							oninput="update_bias_slider_value(this);"
							onchange="save_bias(this);"/>
					</div>
					<div class="bias_slider_min">-12.00</div>
					<div class="bias_slider_cur">0</div>
					<div class="bias_slider_max">12.00</div>
				</div>
			</div>
			<div class="bias_comp_threshold">
				<div class="bias_slider">
					<div class="bias_slider_bar">
						<input type="range" min="0" max="10" step="1" value="10" class="setting_item_input"
							oninput="update_bias_slider_value(this);" 
							onchange="save_bias(this);"/>
					</div>
					<div class="bias_slider_min">0</div>
					<div class="bias_slider_cur">10</div>
					<div class="bias_slider_max">10</div>
				</div>
			</div>
		</div>
		
	</div>
</div>
<div id="setting_menu_story" class="hidden settings_category_area">
	<div id="Story_Info">
		<div>Story Name: <span class="var_sync_story_story_name"></span></div>
		<div>
			<button id="load_story" class="btn action_button" onclick="socket.emit('load_story_list', '');">Load Story</button>
			<button id="save_story" class="btn action_button var_sync_alt_story_gamesaved" onclick='socket.emit("save_story", "");'>Save Story</button>
		</div>

		
	</div>
	<div class="setting_tile_area">
	{% with menu='Story' %}
		{% include 'settings item.html' %}
	{% endwith %}
	</div>
</div>
<div id="setting_menu_user" class="hidden settings_category_area">
	<div class="setting_tile_area">
	{% with menu='User' %}
		{% include 'settings item.html' %}
	{% endwith %}
	</div>
</div>