<!DOCTYPE html>
<html>
<head>
	<link href="static/open-iconic/css/open-iconic.css" rel="stylesheet">
	<link rel="stylesheet" href="static/bootstrap-toggle.min.css">
	<link rel="stylesheet" href="static/bootstrap.min.css">
	<script src="static/jquery-3.6.0.min.js"></script>
	<script src="static/jquery-ui.sortable.min.js"></script>
	<script src="static/bootstrap.min.js"></script>
	<script src="static/bootstrap-toggle.min.js"></script>
	<script src="static/socket.io.min.js"></script>
	<title>KoboldAI Client</title>
	<meta charset="utf-8">
	<link href="static/koboldai.css" rel="stylesheet">
	<script src="static/koboldai.js"></script>
	<script src="static/favicon.js"></script>
</head>
<body>
	<!------------ Left Flyout Menu--------------------->
	<div id="SideMenu" class="SideMenu pinned">
		{% include 'settings flyout.html' %}
	</div>

	<!------------ Main Screen--------------------->
	<div id="main-grid" class="main-grid pinned">
		<!------------ Left Menu Icon--------------------->
		<div class="menu_icon" onclick="toggle_flyout(this)"> 
			<div class="menubar1"></div>
			<div class="menubar2"></div>
			<div class="menubar3"></div>
		</div>
		<!------------ Menu Pin --------------------->
		<span id="menu_pin" class="oi menu_pin" onclick="toggle_pin_flyout()" data-glyph="pin"></span>
		<!------------ Game Text Screen--------------------->
		<div class="gamescreen" id="gamescreen">
			<div class="gametext">
				<span id="story_prompt" class="var_sync_story_prompt rawtext" contenteditable=true onblur="socket.emit('var_change', {'ID': this.id, 'value': this.textContent});"></span>
				<span id="Selected Text" class="rawtext"></span>
			</div>
		</div>
		<!------------ Sequences --------------------->
		<div id="action_count" class="var_sync_actions_Action_Count hidden"></div>
		<div id="Select Options" class="sequence"></div>
		<!------------ Input Area--------------------->
		<div class="inputrow" id="inputrow_container">
			<textarea id="input_text" placeholder="Enter text here"></textarea>
			<div class="statusbar_outer hidden">
				<div class="statusbar_inner" style="width:0%">0%</div>
			</div><br>
			<button type="button" class="btn action_button submit var_sync_alt_system_aibusy" system_aibusy=False id="btnsend" onclick="socket.emit('submit', {'data': document.getElementById('input_text').value});">Submit</button>
			<button type="button" class="btn action_button submited var_sync_alt_system_aibusy"  system_aibusy=False id="btnsend"><img src="static/thinking.gif" class="force_center"></button>
			<button type="button" class="btn action_button back" onclick="socket.emit('back', {});"><span class="oi" data-glyph="action-undo"></span></button>
			<button type="button" class="btn action_button redo" onclick="socket.emit('redo', {});"><span class="oi" data-glyph="action-redo"></span></button>
			<button type="button" class="btn action_button retry" onclick="socket.emit('retry', {});"><span class="oi" data-glyph="loop-circular"></span></button>
		</div>
		<!------------ Right Menu Icon--------------------->
		<span class="oi right_menu_icon" data-glyph="chevron-left" onclick="toggle_flyout_right(this)"></span>
	</div>
	
	<!------------ Right Flyout Menu--------------------->
	<div id="rightSideMenu" class="rightSideMenu">
		{% include 'story flyout.html' %}
	</div>
	
	<!------------- Pop-Up ------------------------------->
	<div class="popup hidden" id="popup">
		<div class="title" id="popup_title">
			Popup Title
		</div>
		<div id="popup_breadcrumbs"></div>
		<div class="popup_list_area" id="popup_list"></div>
		<div class="popup_load_cancel">
			<button class="btn popup_load_cancel_button" id="popup_accept">Load</button>
			<button class="btn popup_load_cancel_button" id="popup_cancel" onclick='document.getElementById("popup").classList.add("hidden");'>Cancel</button>
		</div>
	</div>
	
	<!---------------- Model Load Screen ---------------------->
	<div class="popup hidden" id="loadmodelcontainer">
		<div class="title">
			Select A Model To Load
		</div>
		<div id="loadmodellistbreadcrumbs">
			
		</div>
		<div id="loadmodellistcontent" class="popup_list_area"></div>
		<div class="popup_load_cancel">
			<input class="hidden" type="text" placeholder="key" id="modelkey" onblur="socket.send({'cmd': 'OAI_Key_Update', 'key': $('#modelkey')[0].value});">
			<input class="hidden" type="text" placeholder="Enter the URL of the server (For example a trycloudflare link)" id="modelurl" onchange="check_enable_model_load()">
			<input class="hidden" type="text" placeholder="Model Path or Hugging Face Name" id="custommodelname" menu="" onblur="socket.send({'cmd': 'selectmodel', 'data': $(this).attr('menu'), 'path_modelname': $('#custommodelname')[0].value});">
			<select class="hidden" id="oaimodel"><option value="">Select OAI Model</option></select>
			<div class="hidden" id=modellayers>
				<div class="justifyleft">
					GPU/Disk Layers
					<span class="helpicon">?
						<span class="helptext">Number of layers to assign to GPUs and to disk cache. Remaining layers will be put into CPU RAM.</span>
					</span>
				</div>
				<div class="justifyright"><span id="gpu_layers_current">0</span>/<span id="gpu_layers_max">0</span></div>
				<div id=model_layer_bars style="color: white"></div>
				<input type=hidden id='gpu_count' value=0/>
			</div>
			<div class="box flex-push-right hidden" id=use_gpu_div>
				<input type="checkbox" data-toggle="toggle" data-onstyle="success" id="use_gpu" checked>
				<div class="box-label">Use GPU</div>
			</div>
			<button type="button" class="btn popup_load_cancel_button disabled" onclick="load_model()" id="btn_loadmodelaccept">Load</button>
			<button type="button" class="btn popup_load_cancel_button" onclick='document.getElementById("loadmodelcontainer").classList.add("hidden");' id="btn_loadmodelclose">Cancel</button>
			
		</div>
	</div>
</body>
</html>